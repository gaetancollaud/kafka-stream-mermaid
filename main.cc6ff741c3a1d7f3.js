"use strict";(self.webpackChunkkafka_stream_mermaid=self.webpackChunkkafka_stream_mermaid||[]).push([[179],{538:(h,M,u)=>{var S=u(427),r=u(96),d=u(860),A=u(485),K=u(19);function y(e,i){if(1&e&&r._UZ(0,"div",1),2&e){const t=r.oxw();r.Q6J("innerHTML",t.svgContent,r.oJD)}}const l=e=>e.replaceAll("-","-<br>");let f=(()=>{class e{static startFormatter(t){return`subgraph Sub-Topology: ${t}`}static endFormatter(){return"end"}static visit(t,o,a){let s=t.match(this.pattern);o.length&&o.push(this.endFormatter()),s&&(o.push(this.startFormatter(s[1])),a.push(s[1]))}}return e.pattern=/Sub-topology: ([0-9]*)/,e})(),E=(()=>{class e{static formatter(t,o){return`${o}[${o}] --\x3e ${t}(${l(t)})`}static visit(t,o,a,s){let n=t.match(this.pattern);n&&(s.currentGraphNodeName=n[1].trim(),n[2].split(",").filter(String).map(p=>p.trim()).forEach(p=>{o.push(this.formatter(s.currentGraphNodeName,p)),a.push(p)}))}}return e.pattern=/Source:\s+(\S+)\s+\(topics:\s+\[(.*)\]\)/,e})(),R=(()=>{class e{static formatter(t,o){return t.includes("JOIN")?`${o}[(${l(o)})] --\x3e ${t}(${l(t)})`:`${t}(${l(t)}) --\x3e ${o}[(${l(o)})]`}static visit(t,o,a,s){let n=t.match(this.pattern);n&&(o.currentGraphNodeName=n[1].trim(),n[2].split(",").filter(String).map(p=>p.trim()).forEach(p=>{a.push(this.formatter(o.currentGraphNodeName,p)),s.push(p)}))}}return e.pattern=/Processor:\s+(\S+)\s+\(stores:\s+\[(.*)\]\)/,e})(),v=(()=>{class e{static formatter(t,o){return`${t}(${l(t)}) --\x3e ${o}[${o}]`}static visit(t,o,a,s){let n=t.match(this.pattern);if(n){o.currentGraphNodeName=n[1].trim();let m=n[2].trim();a.push(this.formatter(o.currentGraphNodeName,m)),s.push(m)}}}return e.pattern=/Sink:\s+(\S+)\s+\(topic:\s+(.*)\)/,e})(),C=(()=>{class e{static formatter(t,o){return`${t}(${l(t)}) --\x3e ${o}(${l(o)})`}static visit(t,o,a){let s=t.match(this.pattern);s&&s[1].split(",").filter(String).map(n=>n.trim()).filter(n=>"none"!==n).forEach(n=>{a.push(this.formatter(o.currentGraphNodeName,n))})}}return e.pattern=/\s*-->\s+(.*)/,e})(),N=(()=>{class e{constructor(t){this.sanitizer=t}set topologyDescription(t){let o=this.toMermaid(t);A.Z.mermaidAPI.render("mermaid-graph-"+Date.now(),o.description,a=>{setTimeout(()=>{this.svgContent=a,this.svgContent=this.sanitizer.bypassSecurityTrustHtml(a)})})}ngOnInit(){A.Z.initialize({theme:"forest",startOnLoad:!1})}toMermaid(t){let o=t.split("\n"),a=[],s=[],n={currentGraphNodeName:""},m=[],p=[],g=[],T=[];for(const c of o)switch(!0){case f.pattern.test(c):f.visit(c,a,m);break;case E.pattern.test(c):E.visit(c,s,p,n);break;case R.pattern.test(c):R.visit(c,n,s,T);break;case v.pattern.test(c):v.visit(c,n,s,g);break;case C.pattern.test(c):C.visit(c,n,a)}return a.length&&a.push(f.endFormatter()),{description:["graph TD"].concat(s).concat(a).concat(p).concat(g).concat(T).join("\n"),details:{subTopologies:m,topicSources:p,topicSinks:g,stateStores:T}}}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(S.H7))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-kafka-stream-graph"]],inputs:{topologyDescription:"topologyDescription"},decls:1,vars:1,consts:[[3,"innerHTML",4,"ngIf"],[3,"innerHTML"]],template:function(t,o){1&t&&r.YNc(0,y,1,1,"div",0),2&t&&r.Q6J("ngIf",o.svgContent)},directives:[K.O5],styles:['#topology-description[_ngcontent-%COMP%]{resize:none;font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}']}),e})(),k=(()=>{class e{constructor(){this.topologyDescription="Topology\nSub-topologies:\nSub-topology: 0\n\tSource:  KSTREAM-SOURCE-0000000000 (topics: [conversation-meta])\n\t--\x3e KSTREAM-TRANSFORM-0000000001\n\tProcessor: KSTREAM-TRANSFORM-0000000001 (stores: [conversation-meta-state])\n\t--\x3e KSTREAM-KEY-SELECT-0000000002\n\t<-- KSTREAM-SOURCE-0000000000\n\tProcessor: KSTREAM-KEY-SELECT-0000000002 (stores: [])\n\t--\x3e KSTREAM-FILTER-0000000005\n\t<-- KSTREAM-TRANSFORM-0000000001\n\tProcessor: KSTREAM-FILTER-0000000005 (stores: [])\n\t--\x3e KSTREAM-SINK-0000000004\n\t<-- KSTREAM-KEY-SELECT-0000000002\n\tSink: KSTREAM-SINK-0000000004 (topic: count-resolved-repartition)\n\t<-- KSTREAM-FILTER-0000000005\nSub-topology: 1\n\tSource: KSTREAM-SOURCE-0000000006 (topics: [count-resolved-repartition])\n\t--\x3e KSTREAM-AGGREGATE-0000000003\n\tProcessor: KSTREAM-AGGREGATE-0000000003 (stores: [count-resolved])\n\t--\x3e KTABLE-TOSTREAM-0000000007\n\t<-- KSTREAM-SOURCE-0000000006\n\tProcessor: KTABLE-TOSTREAM-0000000007 (stores: [])\n\t--\x3e KSTREAM-SINK-0000000008\n\t<-- KSTREAM-AGGREGATE-0000000003\n\tSink: KSTREAM-SINK-0000000008 (topic: streams-count-resolved)\n\t<-- KTABLE-TOSTREAM-0000000007\n\t\t\t"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-root"]],decls:6,vars:2,consts:[[1,"content"],[3,"ngModel","ngModelChange"],[3,"topologyDescription"]],template:function(t,o){1&t&&(r.TgZ(0,"h1"),r._uU(1,"Kafka stream visualization"),r.qZA(),r.TgZ(2,"div",0),r.TgZ(3,"textarea",1),r.NdJ("ngModelChange",function(s){return o.topologyDescription=s}),r.qZA(),r._UZ(4,"app-kafka-stream-graph",2),r.qZA(),r._uU(5,"s\n")),2&t&&(r.xp6(3),r.Q6J("ngModel",o.topologyDescription),r.xp6(1),r.Q6J("topologyDescription",o.topologyDescription))},directives:[d.Fj,d.JJ,d.On,N],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:row}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{flex:1}"]}),e})(),O=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e,bootstrap:[k]}),e.\u0275inj=r.cJS({providers:[],imports:[[S.b2,d.u5]]}),e})();(0,r.G48)(),S.q6().bootstrapModule(O).catch(e=>console.error(e))}},h=>{h.O(0,[736],()=>h(h.s=538)),h.O()}]);